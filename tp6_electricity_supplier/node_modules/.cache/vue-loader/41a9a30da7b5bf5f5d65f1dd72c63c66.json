{"remainingRequest":"D:\\phpstudy_pro\\WWW\\gitShopTP\\tp6_electricity_supplier\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\phpstudy_pro\\WWW\\gitShopTP\\tp6_electricity_supplier\\src\\views\\login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\phpstudy_pro\\WWW\\gitShopTP\\tp6_electricity_supplier\\src\\views\\login.vue","mtime":1591943106156},{"path":"D:\\phpstudy_pro\\WWW\\gitShopTP\\tp6_electricity_supplier\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\phpstudy_pro\\WWW\\gitShopTP\\tp6_electricity_supplier\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\phpstudy_pro\\WWW\\gitShopTP\\tp6_electricity_supplier\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\phpstudy_pro\\WWW\\gitShopTP\\tp6_electricity_supplier\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport lvaild from \"../lib/lvalid\";\nimport footer_ from \"../components/footer_\";\nimport { smscode, login } from \"../lib/interface\";\n\nexport default {\n  name: \"login\",\n  components: { footer_ },\n  data() {\n    return {\n      sendDisabled: false,\n      sendText: \"发送验证码\",\n      phone: \"\",\n      code: \"\",\n      url: \"\"\n    };\n  },\n  mounted() {\n    this.url = decodeURIComponent(this.$route.query.redirect);\n    // router.push({path:decodeURIComponent(url)});\n  },\n  methods: {\n    //发送验证码\n    async sendCode() {\n      var that = this;\n      if (this.phone == \"\" || !lvaild.checkMobile(this.phone)) {\n        this.$Message.error(\"请输入正确的手机号码！\");\n        return;\n      }\n      let result = await smscode({ phone_number: this.phone });\n      if (result.status == 0) {\n        this.$Message.error(result.message);\n        return;\n      } else {\n        this.$Message.success(result.message);\n        let timerNum = 60;\n        this.sendDisabled = true;\n        let timer = setInterval(function() {\n          if (timerNum <= 0) {\n            that.sendText = \"发送验证码\";\n            clearInterval(timer);\n            that.sendDisabled = false;\n          } else {\n            that.sendText = timerNum + \"秒后重新获取\";\n            timerNum--;\n          }\n        }, 1000);\n      }\n    },\n    async login() {\n      if (this.phone == \"\") {\n        this.$Message.error(\"请输入正确的手机号码！\");\n        return;\n      }\n      if (this.code == \"\") {\n        this.$Message.error(\"请输入短信验证码！\");\n        return;\n      }\n      let result = await login({\n        phone_number: this.phone,\n        code: this.code,\n        type: 2\n      });\n      if (result.status == 1) {\n        localStorage.setItem(\"token\", result.result.token);\n        localStorage.setItem(\"username\", result.result.username);\n        if (this.url == \"undefined\") {\n          this.$router.replace(\"/\");\n        } else {\n          this.$router.replace(this.url);\n        }\n      } else {\n        this.$Message.error(result.message);\n        return;\n      }\n      //console.log(result);\n      // this.$Message.success(result.msg);\n      // console.log(result);\n    }\n  }\n};\n",{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0GA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <div class=\"public-head-layout container\">\n      <router-link class=\"logo\" to=\"/\">\n        <img src=\"@/assets/images/icons/timg.jpg\" alt=\"TP6\" class=\"cover\" />\n      </router-link>\n    </div>\n    <div class=\"con\">\n      <div class=\"login-layout container\">\n        <div class=\"form-box login\">\n          <div class=\"tabs-nav\">\n            <h2>欢迎登录小竹商城</h2>\n          </div>\n          <div class=\"tabs_container\">\n            <form class=\"tabs_form\" action method=\"post\" id=\"login_form\">\n              <div class=\"form-group\">\n                <div class=\"input-group\">\n                  <div class=\"input-group-addon\">\n                    <span class=\"glyphicon glyphicon-phone\" aria-hidden=\"true\"></span>\n                  </div>\n                  <input\n                    class=\"form-control phone\"\n                    name=\"phone\"\n                    v-model=\"phone\"\n                    placeholder=\"手机号\"\n                    maxlength=\"11\"\n                    autocomplete=\"off\"\n                    type=\"text\"\n                  />\n                </div>\n              </div>\n              <div class=\"form-group\">\n                <div class=\"input-group\">\n                  <div class=\"input-group-addon\">\n                    <span class=\"glyphicon glyphicon-lock\" aria-hidden=\"true\"></span>\n                  </div>\n                  <input\n                    class=\"form-control password\"\n                    v-model=\"code\"\n                    name=\"password\"\n                    placeholder=\"请输入验证码\"\n                    autocomplete=\"off\"\n                    type=\"text\"\n                  />\n                  <div\n                    v-if=\"!sendDisabled\"\n                    v-text=\"sendText\"\n                    class=\"input-group-addon pwd-toggle\"\n                    title=\"发送验证码\"\n                    @click=\"sendCode\"\n                  ></div>\n                  <div\n                    v-if=\"sendDisabled\"\n                    v-text=\"sendText\"\n                    class=\"input-group-addon pwd-toggle\"\n                    title=\"发送验证码\"\n                  ></div>\n                </div>\n              </div>\n              <div class=\"checkbox\">\n                <label>\n                  <input checked id=\"login_checkbox\" type=\"checkbox\" />\n                  <i></i> 30天内免登录\n                </label>\n              </div>\n              <!-- 错误信息 -->\n              <div class=\"form-group\">\n                <div class=\"error_msg\" id=\"login_error\"></div>\n              </div>\n              <button\n                class=\"btn btn-large btn-primary btn-lg btn-block submit\"\n                id=\"login_submit\"\n                type=\"button\"\n                @click=\"login\"\n              >登录</button>\n              <br />\n            </form>\n            <div class=\"tabs_div\">\n              <div class=\"success-box\">\n                <div class=\"success-msg\">\n                  <i class=\"success-icon\"></i>\n                  <p class=\"success-text\">登录成功</p>\n                </div>\n              </div>\n              <div class=\"option-box\">\n                <div class=\"buts-title\">现在您可以</div>\n                <div class=\"buts-box\">\n                  <a role=\"button\" href=\"index.html\" class=\"btn btn-block btn-lg btn-default\">继续访问商城</a>\n                  <a\n                    role=\"button\"\n                    href=\"udai_welcome.html\"\n                    class=\"btn btn-block btn-lg btn-info\"\n                  >登录会员中心</a>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <footer_></footer_>\n  </div>\n</template>\n\n<script>\nimport lvaild from \"../lib/lvalid\";\nimport footer_ from \"../components/footer_\";\nimport { smscode, login } from \"../lib/interface\";\n\nexport default {\n  name: \"login\",\n  components: { footer_ },\n  data() {\n    return {\n      sendDisabled: false,\n      sendText: \"发送验证码\",\n      phone: \"\",\n      code: \"\",\n      url: \"\"\n    };\n  },\n  mounted() {\n    this.url = decodeURIComponent(this.$route.query.redirect);\n    // router.push({path:decodeURIComponent(url)});\n  },\n  methods: {\n    //发送验证码\n    async sendCode() {\n      var that = this;\n      if (this.phone == \"\" || !lvaild.checkMobile(this.phone)) {\n        this.$Message.error(\"请输入正确的手机号码！\");\n        return;\n      }\n      let result = await smscode({ phone_number: this.phone });\n      if (result.status == 0) {\n        this.$Message.error(result.message);\n        return;\n      } else {\n        this.$Message.success(result.message);\n        let timerNum = 60;\n        this.sendDisabled = true;\n        let timer = setInterval(function() {\n          if (timerNum <= 0) {\n            that.sendText = \"发送验证码\";\n            clearInterval(timer);\n            that.sendDisabled = false;\n          } else {\n            that.sendText = timerNum + \"秒后重新获取\";\n            timerNum--;\n          }\n        }, 1000);\n      }\n    },\n    async login() {\n      if (this.phone == \"\") {\n        this.$Message.error(\"请输入正确的手机号码！\");\n        return;\n      }\n      if (this.code == \"\") {\n        this.$Message.error(\"请输入短信验证码！\");\n        return;\n      }\n      let result = await login({\n        phone_number: this.phone,\n        code: this.code,\n        type: 2\n      });\n      if (result.status == 1) {\n        localStorage.setItem(\"token\", result.result.token);\n        localStorage.setItem(\"username\", result.result.username);\n        if (this.url == \"undefined\") {\n          this.$router.replace(\"/\");\n        } else {\n          this.$router.replace(this.url);\n        }\n      } else {\n        this.$Message.error(result.message);\n        return;\n      }\n      //console.log(result);\n      // this.$Message.success(result.msg);\n      // console.log(result);\n    }\n  }\n};\n</script>\n\n<style scoped>\n.con {\n  background: url(https://img10.360buyimg.com/cms/jfs/t1/93644/17/2153/575179/5dcb5129E5b2f2bed/ae22122812cedc5c.jpg)\n    no-repeat center center;\n  /*background: #b31e22;*/\n}\n\n* {\n  /*font-family: 'Microsoft Yahei';*/\n}\n\n.public-head-layout {\n  height: 120px;\n  position: relative;\n}\n\n.logo {\n  width: 200px;\n  height: 100px;\n  display: block;\n  position: absolute;\n  bottom: 0;\n  left: 50px;\n}\n\n.login-layout {\n  height: 450px;\n  position: relative;\n}\n\n.form-box {\n  width: 340px;\n  min-height: 340px;\n  padding: 25px 20px;\n  position: absolute;\n  right: 100px;\n  top: 20px;\n  background-color: #fff;\n  border-radius: 5px;\n  -webkit-box-shadow: 0 15px 35px -25px #b31e22;\n  -moz-box-shadow: 0 15px 35px -25px #b31e22;\n  box-shadow: 0 15px 35px -25px #b31e22;\n}\n\n.tabs_div {\n  display: none;\n}\n\n.tabs-nav h2 {\n  font-size: 18px;\n  margin-top: 0;\n  padding: 10px 0;\n  margin-bottom: 15px;\n  border-bottom: 1px solid #e0e0e0;\n}\n\n.success-box {\n  width: 100%;\n  height: 160px;\n  position: relative;\n}\n\n.success-msg {\n  height: 96px;\n  text-align: center;\n  position: absolute;\n  margin: auto;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n}\n\n.success-icon {\n  width: 64px;\n  height: 64px;\n  display: inline-block;\n  background-image: url(../assets/images/icons/success.png);\n}\n\n.success-text {\n  text-align: center;\n  font-size: 16px;\n  line-height: 32px;\n  height: 32px;\n  margin-bottom: 0;\n}\n\n.buts-title {\n  color: #999;\n  font-size: 16px;\n  margin-bottom: 10px;\n}\n\n.footer-login {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin-top: 200px;\n  border-top: 1px solid #e0e0e0;\n}\n\n.links {\n  margin-top: 10px;\n  display: -webkit-flex;\n  display: flex;\n  flex-flow: row wrap;\n  justify-content: center;\n}\n\n.links li {\n  color: #333;\n  min-width: 80px;\n  text-align: center;\n  margin: 10px 20px 0;\n}\n\n.copyright {\n  color: #666;\n  text-align: center;\n  line-height: 2em;\n}\n</style>\n"]}]}